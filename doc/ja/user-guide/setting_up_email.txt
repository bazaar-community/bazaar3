Eメールを設定する
=================

.. Bazaarでコミット用のEメールを指定するさまざまな方法の説明です。

なぜBazaarでEメールアドレスをセットアップするのか？
---------------------------------------------------

リビジョンが作成されたとき誰がどのリビジョンをコミットしたのかわかるように
Bazaarは指定されたEメールアドレスをリビジョンに保存します。
Eメールアドレスは検証されないので、それゆえ 偽造できるので、プロジェクトに関わる人々を信用しなければなりません。

加えて、リビジョンのEメールアドレスはクレジットかつ/もしくは注釈に関してリビジョンの筆者とコンタクトをとる別の方法を提供します。

Eメールアドレスをセットアップする方法
--------------------------------------

Eメールアドレスが設定されていない場合、Bazaarはユーザー名とホスト名に基づいて推測を試みます。
これは望む状況ではないかもしれないので、Bazaarに使うメールを伝える方法は3つ存在します:

いくつかの設定ファイルの1つにEメールを設定できます。
他の設定値のように、 ``bazaar.conf`` で一般的な設定として設定できます。
特定のブランチ、もしくは複数のブランチの一式用に値を上書きしたい場合、 ``locations.conf`` を利用できます。
``.bzr/branch/branch.conf`` も動作しますが、
他の人であってもそのブランチへのすべてのコミットで同じEメールアドレスが使われます。

優先順位は

 1. ``BZR_EMAIL`` 環境変数が設定されている場合
 #. Eメールが現在のブランチの ``locations.conf`` ファイルに対して設定されている場合。
 #. Eメールが現在のブランチの ``.bzr/branch/branch.conf`` ファイルに設定されている場合。
 #. Eメールがデフォルトの ``bazaar.conf`` 設定ファイルで設定されている場合。
 #. `EMAIL` 環境変数が設定されている場合
 #. Bazaarはユーザー名とホスト名から推測しようとします。

Bazaarが現在のEメールと考えるものを確認するには、 ``whoami`` ("who am i?") コマンドを使います::

    % bzr whoami
    Joe Cool <joe@example.com>
    
'whoami'コマンドでEメールを設定する
------------------------------------

Eメールをグローバルに設定するにはwhoamiコマンドを使用します::

    % bzr whoami "Joe Cool <joe@example.com>"

もしくは現在のブランチのみの場合::

    % bzr whoami --branch "Joe Cool <joe@example.com>"

これらのコマンドによってグローバルな ``bazaar.conf`` もしくはブランチの ``branch.conf`` ファイルがそれぞれ修正されます。

デフォルトの設定ファイルでEメールを設定する
--------------------------------------------

デフォルトのiniファイルを使うには、 ``bazaar.conf`` ファイル
(Unix では ``~/.bazaar/`` 、Windowsでは ``%APPDATA%\bazaar\2.0\`` )を作成し編集して
下記で示すようにEメールアドレスを設定します。
DEFAULTは大文字と個別を区別して、大文字でなければならないことに注意をお願いします。
::

    [DEFAULT]
    email=Your Name <name@isp.com>


iniファイルのフォーマットの詳細情報に関しては、Bazaarユーザーリファレンスの
`構成設定 <../user-reference/index.html#configuration-settings>`_ を参照してください。

ブランチ単位でEメールを設定する
--------------------------------

2番目のアプローチは ``locations.conf`` 設定ファイルを使用してブランチごとにEメールを設定する方法です::

    [/some/branch/location]
    email=Your Name <name@other-isp.com>

これによってブランチのEメールアドレスは ``/some/branch/location`` に設定され、
上記の ``bazaar.conf`` で指定されたデフォルトの値を上書きします。

環境変数を通してEメールを設定する
---------------------------------

Bazaarが利用する最後の方法は ``BZR_EMAIL`` と ``EMAIL`` 環境変数 に対するチェックです。
一般的に、スクリプトのコンテキストでEメールを上書きするためにこの方法を利用できます。
一般的なデフォルトの値に設定したい場合、上記のiniの方法を参照して下さるようお願いします。

スパムに関する懸念事項
-----------------------

スパムの標的にされないようにEメールアドレスを共有したくない人達がいます。
公開された場所で自分でブランチもしくはチェンジセットを公開しない限り、BazaarはけっしてEメールアドレスを露出しません。
他の人があなたに作業内容に関して連絡できるように実際のアドレスを使うことを *強く* お勧めしますが、必須ではありません。  
メールアドレスは難読にしたり、宛先がわからず戻ってくるようにする、もしくは `spamgourmet.cm` のような
アンチスパムサービスの検査をうけさせたりします。
